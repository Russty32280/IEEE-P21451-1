<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.10"/>
<title>P21451_TIM: FIFO Item Buffer</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="navtreedata.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<script type="text/javascript">
  $(document).ready(initResizable);
  $(window).load(resizeHeight);
</script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<script type="text/javascript">
  $(document).ready(function() { init_search(); });
</script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">P21451_TIM
   &#160;<span id="projectnumber">0.1</span>
   </div>
   <div id="projectbrief">Basic TIM Architecture for a IEEE P21451 Transducer Network</div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.10 -->
<script type="text/javascript">
var searchBox = new SearchBox("searchBox", "search",false,'Search');
</script>
  <div id="navrow1" class="tabs">
    <ul class="tablist">
      <li><a href="index.html"><span>Main&#160;Page</span></a></li>
      <li><a href="pages.html"><span>Related&#160;Pages</span></a></li>
      <li><a href="modules.html"><span>Modules</span></a></li>
      <li><a href="annotated.html"><span>Data&#160;Structures</span></a></li>
      <li><a href="files.html"><span>Files</span></a></li>
      <li>
        <div id="MSearchBox" class="MSearchBoxInactive">
        <span class="left">
          <img id="MSearchSelect" src="search/mag_sel.png"
               onmouseover="return searchBox.OnSearchSelectShow()"
               onmouseout="return searchBox.OnSearchSelectHide()"
               alt=""/>
          <input type="text" id="MSearchField" value="Search" accesskey="S"
               onfocus="searchBox.OnSearchFieldFocus(true)" 
               onblur="searchBox.OnSearchFieldFocus(false)" 
               onkeyup="searchBox.OnSearchFieldChange(event)"/>
          </span><span class="right">
            <a id="MSearchClose" href="javascript:searchBox.CloseResultsWindow()"><img id="MSearchCloseImg" border="0" src="search/close.png" alt=""/></a>
          </span>
        </div>
      </li>
    </ul>
  </div>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
$(document).ready(function(){initNavTree('group__item__buffer.html','');});
</script>
<div id="doc-content">
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div class="header">
  <div class="summary">
<a href="#nested-classes">Data Structures</a> &#124;
<a href="#func-members">Functions</a>  </div>
  <div class="headertitle">
<div class="title">FIFO Item Buffer</div>  </div>
</div><!--header-->
<div class="contents">
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="nested-classes"></a>
Data Structures</h2></td></tr>
<tr class="memitem:"><td class="memItemLeft" align="right" valign="top">struct &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="structitem__buffer__t.html">item_buffer_t</a></td></tr>
<tr class="separator:"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="func-members"></a>
Functions</h2></td></tr>
<tr class="memitem:ga1bc23d65759a35a5c79d2a1330564d5a"><td class="memItemLeft" align="right" valign="top">bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__item__buffer.html#ga1bc23d65759a35a5c79d2a1330564d5a">PushItem</a> (<a class="el" href="structitem__buffer__t.html">item_buffer_t</a> *buffer, uint16_t *data)</td></tr>
<tr class="separator:ga1bc23d65759a35a5c79d2a1330564d5a"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga77317789d2a005ff6db3c952ab2b5b90"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__item__buffer.html#ga77317789d2a005ff6db3c952ab2b5b90">PopItem</a> (<a class="el" href="structitem__buffer__t.html">item_buffer_t</a> *buffer, uint16_t *data)</td></tr>
<tr class="separator:ga77317789d2a005ff6db3c952ab2b5b90"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga7edfdec60fea24b3204c4a6e3efa14f7"><td class="memItemLeft" align="right" valign="top">uint16_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__item__buffer.html#ga7edfdec60fea24b3204c4a6e3efa14f7">ItemBufferGetSize</a> (<a class="el" href="structitem__buffer__t.html">item_buffer_t</a> *buffer)</td></tr>
<tr class="separator:ga7edfdec60fea24b3204c4a6e3efa14f7"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga7f98743fe5f0c2d614eefd4d473fd2fd"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__item__buffer.html#ga7f98743fe5f0c2d614eefd4d473fd2fd">ItemBufferInit</a> (<a class="el" href="structitem__buffer__t.html">item_buffer_t</a> *buffer, uint16_t *data_array, uint16_t max_size, uint8_t type_size)</td></tr>
<tr class="separator:ga7f98743fe5f0c2d614eefd4d473fd2fd"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga6f81726387a262fa35a4ea4b0f2d7998"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__item__buffer.html#ga6f81726387a262fa35a4ea4b0f2d7998">ItemBufferSetCallback</a> (<a class="el" href="structitem__buffer__t.html">item_buffer_t</a> *buffer, void(*Callback)(<a class="el" href="structitem__buffer__t.html">item_buffer_t</a> *buffer))</td></tr>
<tr class="separator:ga6f81726387a262fa35a4ea4b0f2d7998"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga14ad34083103e53b491ba9891f5e771d"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__item__buffer.html#ga14ad34083103e53b491ba9891f5e771d">ItemBufferClearCallback</a> (<a class="el" href="structitem__buffer__t.html">item_buffer_t</a> *buffer)</td></tr>
<tr class="separator:ga14ad34083103e53b491ba9891f5e771d"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<a name="details" id="details"></a><h2 class="groupheader">Detailed Description</h2>
<dl class="section author"><dt>Author</dt><dd>Anthony Merlino </dd></dl>
<h2 class="groupheader">Function Documentation</h2>
<a class="anchor" id="ga14ad34083103e53b491ba9891f5e771d"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void ItemBufferClearCallback </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="structitem__buffer__t.html">item_buffer_t</a> *&#160;</td>
          <td class="paramname"><em>buffer</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Clear/remove the callback function for 'buffer'</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">buffer</td><td>Pointer to the <a class="el" href="structbuffer__t.html">buffer_t</a> data structure whose callback function is to be cleared </td></tr>
  </table>
  </dd>
</dl>

<p>Definition at line <a class="el" href="item_buffer_8c_source.html#l00062">62</a> of file <a class="el" href="item_buffer_8c_source.html">itemBuffer.c</a>.</p>

</div>
</div>
<a class="anchor" id="ga7edfdec60fea24b3204c4a6e3efa14f7"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">uint16_t ItemBufferGetSize </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="structitem__buffer__t.html">item_buffer_t</a> *&#160;</td>
          <td class="paramname"><em>buffer</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>GetSize returns the number of items in the FIFO buffer</p>
<p><a class="el" href="group__buffer.html#gaa5f81f606966455aa57a314ddd4e50d4">BufferInit()</a> should be used to initialize the buffer otherwise the return value will be meaningless</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">buffer</td><td>Pointer to the <a class="el" href="structbuffer__t.html">buffer_t</a> data structure holding the buffer info </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>Number of items in the buffer </dd></dl>

<p>Definition at line <a class="el" href="item_buffer_8c_source.html#l00044">44</a> of file <a class="el" href="item_buffer_8c_source.html">itemBuffer.c</a>.</p>

</div>
</div>
<a class="anchor" id="ga7f98743fe5f0c2d614eefd4d473fd2fd"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void ItemBufferInit </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="structitem__buffer__t.html">item_buffer_t</a> *&#160;</td>
          <td class="paramname"><em>buffer</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint16_t *&#160;</td>
          <td class="paramname"><em>data_array</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint16_t&#160;</td>
          <td class="paramname"><em>max_size</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint8_t&#160;</td>
          <td class="paramname"><em>type_size</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Initialize a FIFO buffer</p>
<p>Example code: </p><div class="fragment"><div class="line"><a name="l00001"></a><span class="lineno">    1</span>&#160;#define TX_BUFFER_LENGTH 512</div>
<div class="line"><a name="l00002"></a><span class="lineno">    2</span>&#160;buffer_t tx; // transmit buffer</div>
<div class="line"><a name="l00003"></a><span class="lineno">    3</span>&#160;item_t tx_buffer_array[TX_BUFFER_LENGTH]</div>
<div class="line"><a name="l00004"></a><span class="lineno">    4</span>&#160;...</div>
<div class="line"><a name="l00005"></a><span class="lineno">    5</span>&#160;BufferInit(&amp;tx, &amp;tx_buffer_array[0], TX_BUFFER_LENGTH);</div>
</div><!-- fragment --><dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">buffer</td><td>Pointer to the <a class="el" href="structbuffer__t.html">buffer_t</a> data structure to be initialized </td></tr>
    <tr><td class="paramname">data_array</td><td>Array of item_t data to implement the actual buffer </td></tr>
    <tr><td class="paramname">max_size</td><td>Maximum size of the buffer (should be the same length as the array) </td></tr>
    <tr><td class="paramname">type_size</td><td>Size of the item </td></tr>
  </table>
  </dd>
</dl>

<p>Definition at line <a class="el" href="item_buffer_8c_source.html#l00048">48</a> of file <a class="el" href="item_buffer_8c_source.html">itemBuffer.c</a>.</p>

</div>
</div>
<a class="anchor" id="ga6f81726387a262fa35a4ea4b0f2d7998"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void ItemBufferSetCallback </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="structitem__buffer__t.html">item_buffer_t</a> *&#160;</td>
          <td class="paramname"><em>buffer</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">void(*)(<a class="el" href="structitem__buffer__t.html">item_buffer_t</a> *buffer)&#160;</td>
          <td class="paramname"><em>Callback</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Set Callback function for buffer to be called after items are Push'd to the buffer</p>
<p>The callback function will be called after anything is Push'd to the buffer. The function will be called with a pointer to the buffer which had an item pushed onto it.</p>
<p>Example: </p><div class="fragment"><div class="line"><a name="l00001"></a><span class="lineno">    1</span>&#160;void TxCallback(buffer_t * buf);</div>
<div class="line"><a name="l00002"></a><span class="lineno">    2</span>&#160;#define TX_BUFFER_LENGTH 512</div>
<div class="line"><a name="l00003"></a><span class="lineno">    3</span>&#160;buffer_t tx; // transmit buffer</div>
<div class="line"><a name="l00004"></a><span class="lineno">    4</span>&#160;item_t tx_buffer_array[TX_BUFFER_LENGTH]</div>
<div class="line"><a name="l00005"></a><span class="lineno">    5</span>&#160;...</div>
<div class="line"><a name="l00006"></a><span class="lineno">    6</span>&#160;BufferInit(&amp;tx, &amp;tx_buffer_array[0], TX_BUFFER_LENGTH);</div>
<div class="line"><a name="l00007"></a><span class="lineno">    7</span>&#160;BufferSetCallback(&amp;tx, TxCallback);</div>
<div class="line"><a name="l00008"></a><span class="lineno">    8</span>&#160;...</div>
<div class="line"><a name="l00009"></a><span class="lineno">    9</span>&#160;void TxCallback(buffer_t * buf) {</div>
<div class="line"><a name="l00010"></a><span class="lineno">   10</span>&#160;        SET_UART_TX_IE();</div>
<div class="line"><a name="l00011"></a><span class="lineno">   11</span>&#160;}</div>
</div><!-- fragment --><p> This example is useful for a uC which has a hardware Tx interrupt flag which is set whenever there is room in the hardware Tx FIFO buffer. When done transmitting the interrupt must be disabled to avoid getting stuck in the ISR. When data needs to be sent the interrupt must be enabled again, thus the need for the callback.</p>
<p>Another usage could be to handle received data on a receive buffer.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">buffer</td><td>Pointer to the <a class="el" href="structbuffer__t.html">buffer_t</a> data structure whose callback function is to be set </td></tr>
    <tr><td class="paramname">Callback</td><td>Function pointer to a callback function with no return value and a <a class="el" href="structbuffer__t.html">buffer_t</a> pointer input. </td></tr>
  </table>
  </dd>
</dl>

<p>Definition at line <a class="el" href="item_buffer_8c_source.html#l00058">58</a> of file <a class="el" href="item_buffer_8c_source.html">itemBuffer.c</a>.</p>

</div>
</div>
<a class="anchor" id="ga77317789d2a005ff6db3c952ab2b5b90"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void PopItem </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="structitem__buffer__t.html">item_buffer_t</a> *&#160;</td>
          <td class="paramname"><em>buffer</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint16_t *&#160;</td>
          <td class="paramname"><em>data</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Pop will return one item from the front of the FIFO buffer</p>
<p>Pop will return the item at the front of the FIFO buffer then increment (and wrap as needed) the front. If the buffer is empty it will return 0.</p>
<p><a class="el" href="group__buffer.html#gaa5f81f606966455aa57a314ddd4e50d4">BufferInit()</a> must be used to initialize the buffer prior to calling Pop and passing it a pointer to the buffer.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">buffer</td><td>Pointer to the <a class="el" href="structbuffer__t.html">buffer_t</a> data structure holding the buffer info </td></tr>
    <tr><td class="paramdir">[out]</td><td class="paramname">data</td><td>Data from the front of the buffer copied to the location pointed to</td></tr>
  </table>
  </dd>
</dl>
<dl class="section warning"><dt>Warning</dt><dd>Pop is not yet interrupt safe </dd></dl>

<p>Definition at line <a class="el" href="item_buffer_8c_source.html#l00031">31</a> of file <a class="el" href="item_buffer_8c_source.html">itemBuffer.c</a>.</p>

</div>
</div>
<a class="anchor" id="ga1bc23d65759a35a5c79d2a1330564d5a"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">bool PushItem </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="structitem__buffer__t.html">item_buffer_t</a> *&#160;</td>
          <td class="paramname"><em>buffer</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint16_t *&#160;</td>
          <td class="paramname"><em>data</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Push will add one item, data, to the FIFO buffer</p>
<p>Push will add one item to the rear of the data buffer then increment (and wrap is needed) the rear. If the buffer is full it will overwrite the data at the front of the buffer and increment the front.</p>
<p><a class="el" href="group__buffer.html#gaa5f81f606966455aa57a314ddd4e50d4">BufferInit()</a> must be used to initialize the buffer prior to calling Push and passing it a pointer to the buffer.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">buffer</td><td>Pointer to the <a class="el" href="structbuffer__t.html">buffer_t</a> data structure holding the buffer info </td></tr>
    <tr><td class="paramname">data</td><td>item_t data to be added to the rear of the FIFO buffer</td></tr>
  </table>
  </dd>
</dl>
<dl class="section warning"><dt>Warning</dt><dd>Push is not yet interrupt safe </dd></dl>

<p>Definition at line <a class="el" href="item_buffer_8c_source.html#l00006">6</a> of file <a class="el" href="item_buffer_8c_source.html">itemBuffer.c</a>.</p>

</div>
</div>
</div><!-- contents -->
</div><!-- doc-content -->
<!-- start footer part -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
  <ul>
    <li class="footer">Generated by
    <a href="http://www.doxygen.org/index.html">
    <img class="footer" src="doxygen.png" alt="doxygen"/></a> 1.8.10 </li>
  </ul>
</div>
</body>
</html>
