<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.10"/>
<title>P21451_TIM: Subsystem Module</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="navtreedata.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<script type="text/javascript">
  $(document).ready(initResizable);
  $(window).load(resizeHeight);
</script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<script type="text/javascript">
  $(document).ready(function() { init_search(); });
</script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">P21451_TIM
   &#160;<span id="projectnumber">0.1</span>
   </div>
   <div id="projectbrief">Basic TIM Architecture for a IEEE P21451 Transducer Network</div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.10 -->
<script type="text/javascript">
var searchBox = new SearchBox("searchBox", "search",false,'Search');
</script>
  <div id="navrow1" class="tabs">
    <ul class="tablist">
      <li><a href="index.html"><span>Main&#160;Page</span></a></li>
      <li><a href="pages.html"><span>Related&#160;Pages</span></a></li>
      <li><a href="modules.html"><span>Modules</span></a></li>
      <li><a href="annotated.html"><span>Data&#160;Structures</span></a></li>
      <li><a href="files.html"><span>Files</span></a></li>
      <li>
        <div id="MSearchBox" class="MSearchBoxInactive">
        <span class="left">
          <img id="MSearchSelect" src="search/mag_sel.png"
               onmouseover="return searchBox.OnSearchSelectShow()"
               onmouseout="return searchBox.OnSearchSelectHide()"
               alt=""/>
          <input type="text" id="MSearchField" value="Search" accesskey="S"
               onfocus="searchBox.OnSearchFieldFocus(true)" 
               onblur="searchBox.OnSearchFieldFocus(false)" 
               onkeyup="searchBox.OnSearchFieldChange(event)"/>
          </span><span class="right">
            <a id="MSearchClose" href="javascript:searchBox.CloseResultsWindow()"><img id="MSearchCloseImg" border="0" src="search/close.png" alt=""/></a>
          </span>
        </div>
      </li>
    </ul>
  </div>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
$(document).ready(function(){initNavTree('group__subsys.html','');});
</script>
<div id="doc-content">
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div class="header">
  <div class="summary">
<a href="#nested-classes">Data Structures</a> &#124;
<a href="#define-members">Macros</a> &#124;
<a href="#func-members">Functions</a>  </div>
  <div class="headertitle">
<div class="title">Subsystem Module</div>  </div>
</div><!--header-->
<div class="contents">
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="nested-classes"></a>
Data Structures</h2></td></tr>
<tr class="memitem:"><td class="memItemLeft" align="right" valign="top">struct &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="structversion__mmb__t.html">version_mmb_t</a></td></tr>
<tr class="separator:"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:"><td class="memItemLeft" align="right" valign="top">union &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="unionversion__t.html">version_t</a></td></tr>
<tr class="memdesc:"><td class="mdescLeft">&#160;</td><td class="mdescRight">version union  <a href="unionversion__t.html#details">More...</a><br /></td></tr>
<tr class="separator:"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="define-members"></a>
Macros</h2></td></tr>
<tr class="memitem:gac13b39d92263b3c765189651110c64f3"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__subsys.html#gac13b39d92263b3c765189651110c64f3">SYSTEM_VERSION</a>&#160;&#160;&#160;0x03010001u</td></tr>
<tr class="memdesc:gac13b39d92263b3c765189651110c64f3"><td class="mdescLeft">&#160;</td><td class="mdescRight">subsystem module version number  <a href="#gac13b39d92263b3c765189651110c64f3">More...</a><br /></td></tr>
<tr class="separator:gac13b39d92263b3c765189651110c64f3"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:gaf7b1ce1a8ab4b9ec92d8773f90cb991c"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__subsys.html#gaf7b1ce1a8ab4b9ec92d8773f90cb991c">RECEIVE_MAX_LENGTH</a>&#160;&#160;&#160;64</td></tr>
<tr class="memdesc:gaf7b1ce1a8ab4b9ec92d8773f90cb991c"><td class="mdescLeft">&#160;</td><td class="mdescRight">default length of receive line for commands  <a href="#gaf7b1ce1a8ab4b9ec92d8773f90cb991c">More...</a><br /></td></tr>
<tr class="separator:gaf7b1ce1a8ab4b9ec92d8773f90cb991c"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga91e743817f50d117deeaca986b4c8e4d"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__subsys.html#ga91e743817f50d117deeaca986b4c8e4d">RECEIVE_START_CHAR</a>&#160;&#160;&#160;'$'</td></tr>
<tr class="memdesc:ga91e743817f50d117deeaca986b4c8e4d"><td class="mdescLeft">&#160;</td><td class="mdescRight">start character for command lines  <a href="#ga91e743817f50d117deeaca986b4c8e4d">More...</a><br /></td></tr>
<tr class="separator:ga91e743817f50d117deeaca986b4c8e4d"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga37a39f2cef5d4f3989c8932c3d7346f6"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__subsys.html#ga37a39f2cef5d4f3989c8932c3d7346f6">RECEIVE_STOP_CHAR</a>&#160;&#160;&#160;'\r'</td></tr>
<tr class="memdesc:ga37a39f2cef5d4f3989c8932c3d7346f6"><td class="mdescLeft">&#160;</td><td class="mdescRight">stop character for command lines  <a href="#ga37a39f2cef5d4f3989c8932c3d7346f6">More...</a><br /></td></tr>
<tr class="separator:ga37a39f2cef5d4f3989c8932c3d7346f6"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga7295a34bc57dde069397cf280dc94f32"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__subsys.html#ga7295a34bc57dde069397cf280dc94f32">RECEIVE_MAX_ARGC</a>&#160;&#160;&#160;8</td></tr>
<tr class="memdesc:ga7295a34bc57dde069397cf280dc94f32"><td class="mdescLeft">&#160;</td><td class="mdescRight">max number of arguments after the command name  <a href="#ga7295a34bc57dde069397cf280dc94f32">More...</a><br /></td></tr>
<tr class="separator:ga7295a34bc57dde069397cf280dc94f32"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga5ecc8d4d514ebae84adabf96e0517f6f"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__subsys.html#ga5ecc8d4d514ebae84adabf96e0517f6f">GetLogTimestamp</a>()&#160;&#160;&#160;<a class="el" href="group__timing.html#gad33d57773db985176e2722aeebfee9cc">TimeNow</a>()</td></tr>
<tr class="separator:ga5ecc8d4d514ebae84adabf96e0517f6f"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="func-members"></a>
Functions</h2></td></tr>
<tr class="memitem:gad5c93d1d78ea66a8e631957653e03a74"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__subsys.html#gad5c93d1d78ea66a8e631957653e03a74">LogStr</a> (char *str,...)</td></tr>
<tr class="separator:gad5c93d1d78ea66a8e631957653e03a74"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:gafb675e7cfe55b8b02e927e5c82a98ac0"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__subsys.html#gafb675e7cfe55b8b02e927e5c82a98ac0">LogMsg</a> (uint8_t subsystem_id, char *str,...)</td></tr>
<tr class="separator:gafb675e7cfe55b8b02e927e5c82a98ac0"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga4af744f35168691bbcdf5abe0b5ff4ca"><td class="memItemLeft" align="right" valign="top">uint8_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__subsys.html#ga4af744f35168691bbcdf5abe0b5ff4ca">Subsystem_Init</a> (char *name, <a class="el" href="unionversion__t.html">version_t</a> version, void(*callback)(int argc, char *argv[]))</td></tr>
<tr class="separator:ga4af744f35168691bbcdf5abe0b5ff4ca"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga1e9ede8a23cc1f69f6c9aef8f8718584"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__subsys.html#ga1e9ede8a23cc1f69f6c9aef8f8718584">Subsystem_RegisterCallback</a> (uint8_t subsystem_id, void(*callback)(int argc, char *argv[]))</td></tr>
<tr class="separator:ga1e9ede8a23cc1f69f6c9aef8f8718584"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga6e52643db93bcc255c89cc27e644042d"><td class="memItemLeft" align="right" valign="top">char *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__subsys.html#ga6e52643db93bcc255c89cc27e644042d">GetSubsystemName</a> (uint8_t subsystem_id)</td></tr>
<tr class="separator:ga6e52643db93bcc255c89cc27e644042d"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga0788adbc985fe17ec878d3c0f9f06bff"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__subsys.html#ga0788adbc985fe17ec878d3c0f9f06bff">Log_EchoOn</a> (void)</td></tr>
<tr class="separator:ga0788adbc985fe17ec878d3c0f9f06bff"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:gaaaddf9437be992e2ab59cbc7c6c8a913"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__subsys.html#gaaaddf9437be992e2ab59cbc7c6c8a913">Log_EchoOff</a> (void)</td></tr>
<tr class="separator:gaaaddf9437be992e2ab59cbc7c6c8a913"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga8267834e6ee146c03ae4eba2eb0defc9"><td class="memItemLeft" align="right" valign="top">uint8_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__subsys.html#ga8267834e6ee146c03ae4eba2eb0defc9">Log_GetEcho</a> (void)</td></tr>
<tr class="separator:ga8267834e6ee146c03ae4eba2eb0defc9"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:gab04a3ed723beeb04411222c5ed8be911"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__subsys.html#gab04a3ed723beeb04411222c5ed8be911">Log_Header</a> (uint8_t subsystem_id)</td></tr>
<tr class="separator:gab04a3ed723beeb04411222c5ed8be911"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<a name="details" id="details"></a><h2 class="groupheader">Detailed Description</h2>
<p>Created on: Mar 12, 2014 </p><dl class="section author"><dt>Author</dt><dd>: Michael</dd></dl>
<dl class="section version"><dt>Version</dt><dd>2014.03.26 changed SystemTick to SubsystemTick so the Task Management Module can own <a class="el" href="group__task.html#gafd2aa563748d1ede229e5867753ead5d">SystemTick()</a> </dd>
<dd>
2.0.1 added version, setup SYSTEM subsystem, changed warning messages to priority WARNING and set default priority to ERROR to suppress messages </dd>
<dd>
3.1.1 removed log levels and redueced to mute or unmute. Moved receiver functionality to UART module. Changed callback to take argc argv inputs and added parsing to create argc and argv. </dd></dl>


<h3><a class="anchor" id="sys_receive"></a>SubSystem module command interface</h3><div class="textblock">If bi-directional communication is available (e.g. UART) then the user can interface with the SubSystem module in real time using the module's command interface.A command can be sent to the module in the following format: </p><div class="fragment"><div class="line">$command -f0</div>
</div><!-- fragment --><p> Where the $ indicates the start of the command, command is the name of the command and -f8 is a flag with a value of 8. <br />
Valid system flags are <code>-s</code>, <code>-l</code> and <code>-g</code> The commands available are:<code>version</code> (or <code>ver</code>) - will output a list of subsystems and their version. No flags are applicable.<code>level</code> (or <code>lev</code>) - if no flags are given <code>level</code> will output level a list of valid level codes and their names as used in the log messages. If a <code>-l</code> flag is given but not a <code>-s</code> flag then the level specified with the <code>-l</code> flag is set as the global level. If the <code>-l</code> and <code>-s</code> flags are given then set the level specified with the <code>-l</code> flag for the subsystem specified with the <code>-s</code> flag. If a <code>-g</code> flag is given it will set the global log level to the specified value. The global log level will for any message from any subsystem to be logged if its level is at the global level or below.<code>subsystem</code> (or <code>sub</code> or <code>sys</code> or <code>system</code>) - will output a list of valid subsystem codes and their associated subsystem names and their current log level setting as used by the log message functions. The <code>-s</code> flag can be used to return only information about the specified subsystem.Example usage: </p><div class="fragment"><div class="line">$version</div>
<div class="line"></div>
<div class="line">$sub</div>
<div class="line"></div>
<div class="line">$level</div>
<div class="line"></div>
<div class="line">$level -l0</div>
<div class="line"></div>
<div class="line">$level -s0 -l2</div>
</div><!-- fragment -->In the above example:</p><ul>
<li>output the subsystems and their versions</li>
<li>output the subsystems and their codes</li>
<li>output the log levels and their codes</li>
<li>set the global log level to 0 (OFF)</li>
<li>set the log level for subsystem 0 (SYSTEM) is set to 2 (ERROR).</li>
</ul>
The end result is that no messages would be logged unless they were SYSTEM messages with a priority level greater than or equal to ERROR (note higher priority is lower numerically).Additionally commands may be forwarded to the callback of compatible subsystems using the following format </p><div class="fragment"><div class="line">$12 command &lt;anything goes&gt;</div>
<div class="line">$MUH play</div>
</div><!-- fragment --><p> In the first line subsystem index 12 is sent the command string starting after the space. In the second line a module named MUH is sent a command "play"<dl class="todo"><dt><b><a class="el" href="todo.html#_todo000033">Todo:</a></b></dt><dd>MM Update this comment block </dd></dl>
</div>

<h3><a class="anchor" id="subsys_init"></a>Subsystem module initialization</h3><div class="textblock">Below are three example of how a subsystem could initialize itself.<div class="fragment"><div class="line"><span class="comment">// define the version</span></div>
<div class="line"><span class="preprocessor">#define TASK_VERSION (version_t)0x01010014u</span></div>
<div class="line"></div>
<div class="line"><span class="comment">// initialize module to log EVERYTHING and to use &quot;task&quot; to refer</span></div>
<div class="line"><span class="comment">// to this subsystem in output messages</span></div>
<div class="line">SubsystemInit(TASK, EVERYTHING, <span class="stringliteral">&quot;task&quot;</span>, TASK_VERSION);</div>
<div class="line"></div>
<div class="line"><span class="comment">// or another way to do the same thing</span></div>
<div class="line"></div>
<div class="line"><span class="preprocessor">#define TASK_VERSION_MAJOR 1</span></div>
<div class="line"><span class="preprocessor">#define TASK_VERSION_MINOR 1</span></div>
<div class="line"><span class="preprocessor">#define TASK_VERSION_BUILD 20</span></div>
<div class="line"></div>
<div class="line"><a class="code" href="unionversion__t.html">version_t</a> task_version;</div>
<div class="line">task_version.major = TASK_VERSION_MAJOR;</div>
<div class="line">task_version.minor = TASK_VERSION_MINOR;</div>
<div class="line">task_version.build = TASK_VERSION_BUILD;</div>
<div class="line"></div>
<div class="line">SubsystemInit(TASK, EVERYTHING, <span class="stringliteral">&quot;task&quot;</span>, task_version);</div>
<div class="line"></div>
<div class="line"><span class="comment">// or to do it all in one line</span></div>
<div class="line">uint8_t task_id;</div>
<div class="line">task_id = SubsystemInit(EVERYTHING, <span class="stringliteral">&quot;task&quot;</span>, (<a class="code" href="unionversion__t.html">version_t</a>)0x01010014u);</div>
<div class="line">LogMsG(task_id, WARNING, <span class="stringliteral">&quot;Crap hit the fan&quot;</span>);</div>
</div><!-- fragment --><dl class="todo"><dt><b><a class="el" href="todo.html#_todo000034">Todo:</a></b></dt><dd>MM Update this comment block </dd></dl>
</div><h2 class="groupheader">Macro Definition Documentation</h2>
<a class="anchor" id="ga5ecc8d4d514ebae84adabf96e0517f6f"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define GetLogTimestamp</td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td>&#160;&#160;&#160;<a class="el" href="group__timing.html#gad33d57773db985176e2722aeebfee9cc">TimeNow</a>()</td>
        </tr>
      </table>
</div><div class="memdoc">
<p>GetLogTimestamp must be defined so that it returns a integer (up to 32 bits) timestamp </p>

<p>Definition at line <a class="el" href="subsys_8h_source.html#l00156">156</a> of file <a class="el" href="subsys_8h_source.html">subsys.h</a>.</p>

</div>
</div>
<a class="anchor" id="ga7295a34bc57dde069397cf280dc94f32"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define RECEIVE_MAX_ARGC&#160;&#160;&#160;8</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>max number of arguments after the command name </p>

<p>Definition at line <a class="el" href="subsys_8h_source.html#l00027">27</a> of file <a class="el" href="subsys_8h_source.html">subsys.h</a>.</p>

</div>
</div>
<a class="anchor" id="gaf7b1ce1a8ab4b9ec92d8773f90cb991c"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define RECEIVE_MAX_LENGTH&#160;&#160;&#160;64</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>default length of receive line for commands </p>

<p>Definition at line <a class="el" href="subsys_8h_source.html#l00023">23</a> of file <a class="el" href="subsys_8h_source.html">subsys.h</a>.</p>

</div>
</div>
<a class="anchor" id="ga91e743817f50d117deeaca986b4c8e4d"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define RECEIVE_START_CHAR&#160;&#160;&#160;'$'</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>start character for command lines </p>

<p>Definition at line <a class="el" href="subsys_8h_source.html#l00025">25</a> of file <a class="el" href="subsys_8h_source.html">subsys.h</a>.</p>

</div>
</div>
<a class="anchor" id="ga37a39f2cef5d4f3989c8932c3d7346f6"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define RECEIVE_STOP_CHAR&#160;&#160;&#160;'\r'</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>stop character for command lines </p>

<p>Definition at line <a class="el" href="subsys_8h_source.html#l00026">26</a> of file <a class="el" href="subsys_8h_source.html">subsys.h</a>.</p>

</div>
</div>
<a class="anchor" id="gac13b39d92263b3c765189651110c64f3"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define SYSTEM_VERSION&#160;&#160;&#160;0x03010001u</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>subsystem module version number </p>

<p>Definition at line <a class="el" href="subsys_8h_source.html#l00020">20</a> of file <a class="el" href="subsys_8h_source.html">subsys.h</a>.</p>

</div>
</div>
<h2 class="groupheader">Function Documentation</h2>
<a class="anchor" id="ga6e52643db93bcc255c89cc27e644042d"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">char* GetSubsystemName </td>
          <td>(</td>
          <td class="paramtype">uint8_t&#160;</td>
          <td class="paramname"><em>subsystem_id</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Return a pointer to a string corresponding to the name of the subsystem</p>
<p>The name returned is the one set by SubsystemInit()</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">subsystem_id</td><td></td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>- pointer to a null terminated string corresponding to the name of the subsystem </dd></dl>

<p>Definition at line <a class="el" href="subsys_8c_source.html#l00085">85</a> of file <a class="el" href="subsys_8c_source.html">subsys.c</a>.</p>

</div>
</div>
<a class="anchor" id="gaaaddf9437be992e2ab59cbc7c6c8a913"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void Log_EchoOff </td>
          <td>(</td>
          <td class="paramtype">void&#160;</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Turn echo feature off </p>

<p>Definition at line <a class="el" href="subsys_8c_source.html#l00349">349</a> of file <a class="el" href="subsys_8c_source.html">subsys.c</a>.</p>

</div>
</div>
<a class="anchor" id="ga0788adbc985fe17ec878d3c0f9f06bff"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void Log_EchoOn </td>
          <td>(</td>
          <td class="paramtype">void&#160;</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Turn echo featuren on (default is off) </p>

<p>Definition at line <a class="el" href="subsys_8c_source.html#l00345">345</a> of file <a class="el" href="subsys_8c_source.html">subsys.c</a>.</p>

</div>
</div>
<a class="anchor" id="ga8267834e6ee146c03ae4eba2eb0defc9"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">uint8_t Log_GetEcho </td>
          <td>(</td>
          <td class="paramtype">void&#160;</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Get status of echo setting</p>
<dl class="section return"><dt>Returns</dt><dd>echo setting, 1 if echo is on </dd></dl>

<p>Definition at line <a class="el" href="subsys_8c_source.html#l00353">353</a> of file <a class="el" href="subsys_8c_source.html">subsys.c</a>.</p>

</div>
</div>
<a class="anchor" id="gab04a3ed723beeb04411222c5ed8be911"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void Log_Header </td>
          <td>(</td>
          <td class="paramtype">uint8_t&#160;</td>
          <td class="paramname"><em>subsystem_id</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Log header (timestamp and subsystem name)</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">subsystem_id</td><td>subsystem id (index) </td></tr>
  </table>
  </dd>
</dl>

<p>Definition at line <a class="el" href="subsys_8c_source.html#l00294">294</a> of file <a class="el" href="subsys_8c_source.html">subsys.c</a>.</p>

</div>
</div>
<a class="anchor" id="gafb675e7cfe55b8b02e927e5c82a98ac0"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void LogMsg </td>
          <td>(</td>
          <td class="paramtype">uint8_t&#160;</td>
          <td class="paramname"><em>subsystem_id</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">char *&#160;</td>
          <td class="paramname"><em>str</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>...</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Logs the message at the pointer (str) with a timestamp and subsystem name</p>
<p>Before logging the message the function will check the current log setting of the subsystem and to determine if the message should be logged</p>
<p>This function is implemented using Push_vprintf. See <a class="el" href="group__buffer__printf.html#gab003a6708a2b979e7910c68adcab9f3c" title="printf implementation to char buffer ">Push_printf()</a> for supported flags/features.</p>
<p>Will log the string to the buffer defined by SUSSYS_UART</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">subsystem_id</td><td>subsystem id </td></tr>
    <tr><td class="paramname">str</td><td>pointer to message to log </td></tr>
    <tr><td class="paramname">...</td><td>variable number of replacement parameters for the str string</td></tr>
  </table>
  </dd>
</dl>
<p>Example usage: </p><div class="fragment"><div class="line"><a name="l00001"></a><span class="lineno">    1</span>&#160;LogMsg(sys.id, &quot;oops I crapped my pants&quot;);</div>
<div class="line"><a name="l00002"></a><span class="lineno">    2</span>&#160;LogMsg(sys.id, &quot;System Index %d, System Name %s.&quot;, sys.id, GetSubsystemName(SYSTEM));</div>
</div><!-- fragment --> 
<p>Definition at line <a class="el" href="subsys_8c_source.html#l00275">275</a> of file <a class="el" href="subsys_8c_source.html">subsys.c</a>.</p>

</div>
</div>
<a class="anchor" id="gad5c93d1d78ea66a8e631957653e03a74"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void LogStr </td>
          <td>(</td>
          <td class="paramtype">char *&#160;</td>
          <td class="paramname"><em>str</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>...</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Logs the null terminated string at the pointer (str)</p>
<p>Same as <a class="el" href="group__subsys.html#gafb675e7cfe55b8b02e927e5c82a98ac0">LogMsg()</a> without the header in the beginning and without the CRLF at the end.</p>
<p>This function is implemented using Push_vprintf. See <a class="el" href="group__buffer__printf.html#gab003a6708a2b979e7910c68adcab9f3c" title="printf implementation to char buffer ">Push_printf()</a> for supported flags/features.</p>
<p>Will log the string to the buffer defined by LOG_BUF (typically tx0)</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">str</td><td>pointer to string to log </td></tr>
    <tr><td class="paramname">...</td><td>variable number of replacement parameters for the str string</td></tr>
  </table>
  </dd>
</dl>
<p>Example usage: </p><div class="fragment"><div class="line"><a name="l00001"></a><span class="lineno">    1</span>&#160;LogStr(&quot;oops I crapped my pants&quot;);</div>
<div class="line"><a name="l00002"></a><span class="lineno">    2</span>&#160;LogStr(&quot;System Index %d, System Name %s.&quot;, SYSTEM, GetSubsystemName(SYSTEM));</div>
</div><!-- fragment --> 
<p>Definition at line <a class="el" href="subsys_8c_source.html#l00264">264</a> of file <a class="el" href="subsys_8c_source.html">subsys.c</a>.</p>

</div>
</div>
<a class="anchor" id="ga4af744f35168691bbcdf5abe0b5ff4ca"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">uint8_t Subsystem_Init </td>
          <td>(</td>
          <td class="paramtype">char *&#160;</td>
          <td class="paramname"><em>name</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="unionversion__t.html">version_t</a>&#160;</td>
          <td class="paramname"><em>version</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">void(*)(int argc, char *argv[])&#160;</td>
          <td class="paramname"><em>callback</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Initialize settings for a subsystem - critical for proper logging and command interface</p>
<p>If a module/subsystem uses logging it should call this function with the appropriate inputs when the subsystem is initializing.</p>
<dl class="section return"><dt>Returns</dt><dd>subsystem index </dd></dl>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">name</td><td>pointer to name of the subsystem (recommended to make the name 8 characters or less) </td></tr>
    <tr><td class="paramname">version</td><td>software version of subsystem, see <a class="el" href="unionversion__t.html" title="version union ">version_t</a> for more info </td></tr>
    <tr><td class="paramname">callback</td><td>callback function to be called when the user inputs a command in the form of "$name var1 var2 var3...". Where name is the name passed to this function. The callback will be passed the number of arguments, <code>argc</code> , and a array of pointers to the argument strings, <code>argv</code>. </td></tr>
  </table>
  </dd>
</dl>

<p>Definition at line <a class="el" href="subsys_8c_source.html#l00102">102</a> of file <a class="el" href="subsys_8c_source.html">subsys.c</a>.</p>

</div>
</div>
<a class="anchor" id="ga1e9ede8a23cc1f69f6c9aef8f8718584"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void Subsystem_RegisterCallback </td>
          <td>(</td>
          <td class="paramtype">uint8_t&#160;</td>
          <td class="paramname"><em>subsystem_id</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">void(*)(int argc, char *argv[])&#160;</td>
          <td class="paramname"><em>callback</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Register a callback function for a subsystem</p>
<p>When a command is received by the logging module for the subsystem <code>sys</code> the <code>callback</code> function will be executed and passed the number of arguments <code>argc</code> and a array (vector) of pointer to the argument strungs <code>argv</code>.</p>
<p>The callback is set by <a class="el" href="group__subsys.html#ga4af744f35168691bbcdf5abe0b5ff4ca">Subsystem_Init()</a>, this function can be used to update the callback.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">subsystem_id</td><td>- subsystem to register the callback for </td></tr>
    <tr><td class="paramname">callback</td><td>- function pointer to the function to run when a command is received for the subsystem. </td></tr>
  </table>
  </dd>
</dl>

<p>Definition at line <a class="el" href="subsys_8c_source.html#l00113">113</a> of file <a class="el" href="subsys_8c_source.html">subsys.c</a>.</p>

</div>
</div>
</div><!-- contents -->
</div><!-- doc-content -->
<!-- start footer part -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
  <ul>
    <li class="footer">Generated by
    <a href="http://www.doxygen.org/index.html">
    <img class="footer" src="doxygen.png" alt="doxygen"/></a> 1.8.10 </li>
  </ul>
</div>
</body>
</html>
